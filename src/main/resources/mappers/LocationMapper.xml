<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.almond.api.location.dao.LocationMapper">
 	
    <select id="locationList" parameterType="String" resultType="Location">
    	/* 지역 목록 조회 */
    	SELECT loc.idx,
    	       loc.nationCode,
    	       nat.name as nationName,
    	       loc.name,
    	       loc.regDate
    	FROM memopad_location loc
    	LEFT JOIN memopad_nation nat
    	ON loc.nationCode = nat.code
    	WHERE loc.delYN = 'N'
    	  AND nat.delYN = 'N'
    	  <if test="value != null">
    	  /* 특정 국가의 지역 목록 조회 */
    	  AND loc.nationCode = #{value}
		  </if>
    	ORDER BY nat.sort DESC, loc.sort DESC
    </select>

</mapper>